\section{Матрица перехода от одного базиса к другому. Изменение координат вектора при замене базиса}

\begin{definition}
    Пусть $V$ --- линейное пространство, и $e_1, \ldots, e_n$ --- базис в $V$. Любой вектор $x \in V$ единственным образом представляется в виде линейной комбинации базисных векторов: $x = \sum\limits_{i = 1}^nx_ie_i$. Числа $x_1, \ldots, x_n \in \F$ называются \textit{координатами} вектора $x$ в базисе $e_1, \ldots, e_n$.
\end{definition}

\textbf{Обозначения Эйнштейна}. Вместо $\sum\limits_{i = 1}^nx_ie_i$ пишем $x^ie_i$ (суммирование производится по повторяющемуся индексу). В связи с этим обозначением, нам будет также удобно обозначать координаты вектора верхними индексами вместо нижних. Для произведения матриц: $c^i_k = a^i_jb^j_k$ (суммирование опять производится по повторяющемуся индексу; причём важно, что сначала повторяющийся индекс $j$ стоит внизу, а потом вверху). Матрица $(d^j_k)$ является обратной к $(c^i_j)$, если $c^i_jd^j_k = \delta^i_k$ --- символ Кронекера.

Пусть в пространстве $V$ заданы два базиса: <<старый>> $e_1, \ldots, e_n$ и <<новый>> $e^\prime_1, \ldots, e^\prime_n$. Нам будет удобно обозначать векторы нового базиса через $e_{1^\prime}, \ldots, e_{n^\prime}$. Элементы нового базиса выражаются через элементы старого: $e_{i^\prime} = c^i_{i^\prime}e_i$, $i^\prime = 1, \ldots, n$. Эти формулы равносильны одному матричному равенству
\[
    (e_{1^\prime}, \ldots, e_{n^\prime}) = (e_1, \ldots, e_n) \cdot
    \begin{pmatrix}
        c^1_{1^\prime} & \cdots & e^1_{n^\prime}\\
        \vdots & \ddots & \vdots\\
        c^n_{1^\prime} & \cdots & c^n_{n^\prime}
    \end{pmatrix}.
\]

\begin{definition}
    Матрица $C \vcentcolon = (c^i_{i^\prime})$ называется \textit{матрицей перехода} от базиса $e_1, \ldots, e_n$ к базису $e_{1^\prime}, \ldots, e_{n^\prime}$. Её столбцами являются координаты новых базисных векторов в старом базисе.
\end{definition}

\begin{proposal}
    \begin{enumerate}[nolistsep]
        \item Матрица $C_{e^\prime \to e} = (c^{i^\prime}_i)$ перехода от базиса $e_{1^\prime}, \ldots, e_{n^\prime}$ к базису $e_1, \ldots, e_n$ является обратной к матрице $C_{e \to e^\prime}$ перехода от $e_1, \ldots, e_n$ к $e_{1^\prime}, \ldots, e_{n^\prime}$, т.\,е. $C_{e \to e^\prime} \cdot C_{e^\prime \to e} = E$. В частности, матрица перехода всегда невырождена.
        \item Если $e_1, \ldots, e_n$, $e_{1^\prime}, \ldots, e_{n^\prime}$, $e_{1^{\prime\prime}}, \ldots, e_{n^{\prime\prime}}$ --- три базиса, то для соответствующих матриц перехода выполнено $C_{e \to e^\prime}\cdot C_{e^\prime \to e^{\prime\prime}} = C_{e \to e^{\prime\prime}}$.
    \end{enumerate}
\end{proposal}

\begin{proof}
    Первое утверждение следует из второго, если положить $e^{\prime\prime} = e$, поэтому будем доказывать второе утверждение. Пусть $C_{e \to e^\prime} = (c^i_{i^\prime})$, $C_{e^\prime \to e^{\prime\prime}} = (c^{i^\prime}_{i^{\prime\prime}})$, $C_{e \to e^{\prime\prime}} = (c^i_{i^{\prime\prime}})$. Тогда
    \[
        c^i_{i^{\prime\prime}}e_i = e_{i^{\prime\prime}} = c^{i^\prime}_{i^{\prime\prime}}e_{i^\prime} = c^{i^\prime}_{i^{\prime\prime}}c^i_{i^\prime}e_i = c^i_{i^\prime}c^{i^\prime}_{i^{\prime\prime}}e_i \Rightarrow c^i_{i^{\prime\prime}} = c^i_{i^\prime} \cdot c^{i^\prime}_{i^{\prime\prime}}.
    \]
\end{proof}

\begin{remark}
    Важное практическое следствие. Заметим, что в $\R^n$ писать матрицу перехода от стандартного базиса к любому другому очень легко --- достаточно написать базисные векторы, в которые мы хотим перейти, по столбцам матрицы. Пусть мы хотим написать матрицу перехода от базиса $a = \{a_1, a_2, \ldots, a_n\}$ к базису $b = \{b_1, b_2, \ldots, b_n\}$. Для этого можно написать матрицу $A$ перехода от стандартного к $a$, потом матрицу $B$ перехода от стандартного к $b$, а потом выдать ответ --- $A^{-1}B$.
\end{remark}

\begin{remark}
    Трюк от Александра Александровича Гайфуллина (и в Винберге находил). Чтобы найти матрицу $X = A^{-1}B$ при известных $A$ и $B$, не надо искать $A^{-1}$, а потом умножать её на $B$. Домножим на $A$ слева, получим $AX = B$. Это $n$ систем линейных уравнений с одной и той же матрицей $A$ (решив $i$-ую систему, найдём $i$-ый столбец $X$). Эти системы можно решать одновременно, записав матрицу $A$ в правой части и приписав к ней каждый столбец $B$ по очереди. Выглядеть будет как $(A \mid B)$. Решить системы --- значит привести эту матрицу $n \times 2n$ к улучшенному ступенчатому виду: $(E \mid X)$. В правой части теперь будут стоять столбцы матрицы $X$.
\end{remark}

\begin{theorem}[Закон изменения координат]
    Пусть $x^1, \ldots, x^n$ --- координаты вектора $x$ в базисе $e_1, \ldots, e_n$, а $x^{1^\prime}, \ldots, x^{n^\prime}$ --- в базисе $e_{1^\prime}, \ldots, e_{n^\prime}$. Тогда два набора координат связаны формулой
    \[
        \begin{pmatrix}
            x^1\\
            \vdots\\
            x^n
        \end{pmatrix} = C \cdot 
        \begin{pmatrix}
            x^{1^\prime}\\
            \vdots\\
            x^{n^\prime}
        \end{pmatrix}.
    \]
\end{theorem}

\begin{proof}
    В обозначениях Эйнштейна утверждение равносильно $x^i = c^i_{i^\prime}x^{i^\prime}$, $i = 1, \ldots, n$. Оно верно, потому что
    \[
        x^ie_i = x = x^{i^\prime}e_{i^\prime} = x^{i^\prime}c^i_{i^\prime}e_i \Rightarrow x^i = x^{i^\prime}c^i_{i^\prime} = c^i_{i^\prime}x^{i^\prime}.
    \]
\end{proof}

